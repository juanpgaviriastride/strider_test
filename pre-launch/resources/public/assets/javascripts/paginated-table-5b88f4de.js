var invitations,InvitationTable=Backbone.View.extend({initialize:function(){return Backbone.View.prototype.initialize.call(this),_.bindAll(this,"render","nextPage","goTo"),this.size=5,this.page=1,this.rows=[],this.pages_view=new pagerView({parent:this,collection:this.collection,el:$('[data-role="pager-view"]')}),this.render(),this},render:function(){return this.goTo(this.page),this.controlls(),this},controlls:function(){this.pages_view.render()},getContext:function(){},nextPage:function(){},prePage:function(){},goTo:function(t){this.cleanRows(),this.page=t,this.controlls();for(var e=(parseInt(t)-1)*this.size,i=0;i<this.size&&this.collection.at(e+i);i++){var a=this.collection.at(e+i),n=new InvitationItemView({model:a});this.rows.push(n)}},addRow:function(){},cleanRows:function(){_.each(this.row,function(t){t.remove()}),$('[data-role="table-col-name"]').html(""),$('[data-role="table-col-date"]').html(""),$('[data-role="table-col-status"]').html("")}}),InvitationItemView=Backbone.View.extend({initialize:function(){return Backbone.View.prototype.initialize.call(this),_.bindAll(this,"render","getContext"),this.$name=null,this.$date=null,this.$status=null,this.render(),this},render:function(){return this.$name=_.template($("#table-col-name-template").html())(this.getContext()),this.$date=_.template($("#table-col-date-template").html())(this.getContext()),this.$status=_.template($("#table-col-status-template").html())(this.getContext()),$('[data-role="table-col-name"]').append(this.$name),$('[data-role="table-col-date"]').append(this.$date),$('[data-role="table-col-status"]').append(this.$status),this},getContext:function(){return{model:this.model}}}),pagerView=Backbone.View.extend({initialize:function(t){return Backbone.View.prototype.initialize.call(this),_.bindAll(this,"render","getContext","addAll","addPage","addMorePage"),this.parent=t.parent,this.pages_to_show=3,this},events:{"click [data-role=first]":"goToFirst","click [data-role=last]":"goToLast"},render:function(){return this.page=this.parent.page,this.size=this.parent.size,this.pages=Math.ceil(this.collection.length/this.size),this.$el.html(_.template($("#table-pager-template").html())(this.getContext())),this.addAll(),this},getContext:function(){return{}},goToFirst:function(t){t.preventDefault(),this.parent.goTo(1)},goToLast:function(t){t.preventDefault(),this.parent.goTo(this.pages)},addAll:function(){var t=[],e=!1,i=!1;this.collection.lenght<=this.size?t.push(1):this.pages<=this.pages_to_show?($('[data-role="first"]',this.$el).hide(),$('[data-role="last"]',this.$el).hide(),_.each(_.range(this.pages),function(e){t.push(e+1)})):(start_range=_.range(1,this.pages_to_show+1),end_range=_.range(this.pages-this.pages_to_show+1,this.pages+1),_.indexOf(start_range,this.page)>=0?($('[data-role="first"]',this.$el).hide(),$('[data-role="last"]',this.$el).show(),e=!1,i=!0,_.each(start_range,function(e){t.push(e)})):_.indexOf(end_range,this.page)>=0?($('[data-role="first"]',this.$el).show(),$('[data-role="last"]',this.$el).hide(),e=!0,i=!1,_.each(end_range,function(e){t.push(e)})):($('[data-role="first"]',this.$el).show(),$('[data-role="last"]',this.$el).show(),e=!0,i=!0,_.each(_.range(this.page,this.page+this.pages_to_show),function(e){t.push(e)}))),e&&this.addMorePage(_.first(t)-1),_.each(t,this.addPage),i&&this.addMorePage(_.last(t)+1)},addPage:function(t){t=new pageView({page:t,parent:this}),$('[data-role="pages-items"]',this.$el).append(t.render().el)},addMorePage:function(t){t=new morePageView({page:t,parent:this}),$('[data-role="pages-items"]',this.$el).append(t.render().el)},goTo:function(t){this.parent.goTo(t)}}),pageView=Backbone.View.extend({tagName:"li",initialize:function(t){return Backbone.View.prototype.initialize.call(this),_.bindAll(this,"render","getContext","onClickHandler"),this.page=t.page,this.parent=t.parent,this},events:{click:"onClickHandler"},render:function(){return this.$el.html(_.template($("#table-page-template").html())(this.getContext())),this},getContext:function(){return{page:this.page}},onClickHandler:function(t){t.preventDefault(),this.parent.goTo(this.page)}}),morePageView=pageView.extend({tagName:"li",render:function(){return this.$el.html(_.template($("#table-more-page-template").html())(this.getContext())),this}});